package superman.core;

import superman.ui.MainForm;

import javax.swing.*;

public class ShellUpload extends Thread{
    @Override
    public void run() {
        MainForm.getMainForm().getUploadButton().setEnabled(false);
        upload();
        MainForm.getMainForm().getUploadButton().setEnabled(true);
    }

    private void upload() {
        if(Store.ECHO_VUL ==null){
            JOptionPane.showMessageDialog(null, "请先检查漏洞是否存在,或漏洞不能直接上传shell", "提示",JOptionPane.WARNING_MESSAGE);
            return;
        }
        String path = MainForm.getMainForm().getPathTextField().getText().trim();
        if (path.equals("")) {
            JOptionPane.showMessageDialog(null, "路径不能为空", "提示", JOptionPane.WARNING_MESSAGE);
            return;
        }
        String text = MainForm.getMainForm().getShellTextArea().getText().trim();
        if (text.equals("")) {
            JOptionPane.showMessageDialog(null, "Shell不能为空", "提示", JOptionPane.WARNING_MESSAGE);
            return;
        }
        Store.ECHO_VUL.upload(path,text);
        JOptionPane.showMessageDialog(null, "Shell已上传，请检查！", "提示", JOptionPane.WARNING_MESSAGE);
    }

}
